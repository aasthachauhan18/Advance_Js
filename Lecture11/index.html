<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Lecture11</title>
    </head>
    <body>
        <button id="btn">Click Me!</button>
        <script>
        // Task 1: Simple Callback Execution

        // function processData(name,msg) {
        //     console.log(`Helllo ${name}`);
        //     msg();
            
        // }
        // function greet() {
        //     console.log("How Are You?");
            
        // }
        // processData("Aastha",greet);


        // Task 2: Callback vs Normal Function Call

        //CallBack Function

        // function processData(name,msg) {
        //     console.log(`Helllo ${name}`);
        //     msg();
            
        // }
        // function greet() {
        //     console.log("How Are You?");
            
        // }
        // console.log("Start");
        
        // processData("Aastha",greet);
        // console.log("End");
        


        //Normal Function

        // function processData() {
        //     console.log("Hello,How Are you?");
            
        // }
        // console.log("Start");
        // processData();
        // console.log("End");


        // Task 3: Timer-Based Callback

        // console.log("Hello");
        // setTimeout(() => {
        //     console.log("How Are You?");
            
        // },2000);
        // console.log("Bye");


        // Task 4: Countdown Timer

        // let count = 5;
        // let time = setInterval(() => {
        //     console.log(count);
        //     count--;

        //     if (count<0) {
        //         console.log("Count Finished");
        //         clearInterval(time)
        //     }
            
        // },2000)

        // Task 5: Event Callback (Button Click)
        
        // const button = document.getElementById("btn");
        // button.addEventListener('click',function () {
        //     console.log("Button Clicked");
            
        // })
        
        // Task 6: Callback as Configuration
        function calculate(a,b,operationCallback) {
            return operationCallback(a,b)
        }

        function add(x,y) {
            return x+y
        }
        function mul(x,y) {
            return x*y
        }
        console.log(calculate(5,4,add));
        console.log(calculate(5,4,mul));
        

        // Task 7: Execution Order Prediction

        // console.log("Start");
        // setTimeout(() => {
        //     console.log("Hello");
            
        // },2000);
        // console.log("End");


        // Task 8: Simulated API Request

        function fatchUserData(callback) {
            setTimeout(() => {
                const user = {
                    id:1,
                    name:"abc"
                }
                callback(user)
            },2000)
        }

        fatchUserData((data) => {
            console.log(data);
            
        })
        

        // Task 9: Error-First Callback Pattern   //Doubt

        //  function fatchUserData(callback) {
        //     setTimeout(() => {
        //         let err = null
               
        //         const user = {
        //             id:1,
        //             name:"abc"
        //         }
        //         callback(user)
        //     },2000)
        // }

        // fatchUserData((error,data) => {
        //     if (error) {
        //         console.error(error);
                
        //     }
        //     else{
        //         console.log(data);
                
        //     }
            
        // })


        // Task 10: Sequential Async Operations

        function loadData(callback) {
            setTimeout(() => {

                callback({id:1,name:"abc"})
            },1000);
        }

        function loadPost(userId,callback){
            setTimeout(() =>{
                callback(["post1","post2"])
            },1000);
        }

        loadData((user) => {
            loadPost(user.id,(posts) =>{
                console.log(user.id);
                console.log(posts);
                
                
            })
        })
        
        // Task 11: Identify Callback Hell

        // loadData((user) => {
        //     loadPost(user.id,(posts) => {
        //         loadcomments(posts[0],() =>{
        //             notifyUser(() => {
        //                 console.log("Done");
        //             })
        //         })
        //     })
        // })
        

        // Task 12: Refactor Callback Hell (Modular Functions)

        // function loadData(user) {
        //     handlepost(user.id,loadPost)
        // }
        // function loadPost(posts) {
        //     handlecomments(posts[0],loadcomment)
            
        // }

        // function loadcomment(comments) {
        //     saveToDb(comments,notify)
            
        // }
        // function notify() {
        //     console.log("Done");
            
        // }

        // loaddata(handleuser);


        // Task 13: Higher-Order Array Callback

        const arr = [
            {name:"abc",age:20},
            {name:"xyz",age:25},
            {name:"pqr",age:30}
        ];

        const adults = arr.filter((user) => user.age>=24);
        console.log(adults);
        
        const users = arr.map((user) => user.name);
        console.log(users);

        users.forEach(name => console.log(name));
        
        

        // Task 15: Timeout Cancellation

        const time = setTimeout(() =>{
            console.log("hello");
            
        },2000);
        // clearTimeout(time)
        
    </script>
    </body>
</html>