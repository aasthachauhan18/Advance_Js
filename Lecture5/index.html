<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture5</title>
</head>
<body>
    <script>
        // 1️ Identify and Fix Impure Function

let tax = 0.1;

function calculate(price) {
  return price + price * tax;
}

function calculate(price, tax) {
  return price + price * tax;
}



// 2️ Remove Side Effect from Function


let count = 0;

function increment() {
  count++;
}

function increment(count) {
  return count + 1;
}


// 3️ Fix Array Mutation Bug


function addItem(arr, item) {
  arr.push(item);
  return arr;
}

function addItem(arr, item) {
  return [...arr, item];
}



// 4️ Convert Imperative to Declarative Code
// const result = [];
// for (let i = 0; i < nums.length; i++) {
//   if (nums[i] > 10) {
//     result.push(nums[i]);
//   }
// }

// const result = nums.filter(n => n > 10);


// 5️ Fix Object Mutation
function updateAge(user) {
  user.age = 30;
  return user;
}

function updateAge(user) {
  return { ...user, age: 30 };
}


// 6️ Identify Side Effect
function logMessage(msg) {
  console.log(msg);
}


//  Impure function



// 7️ Fix Function with Hidden Dependency
let discount = 20;

function finalPrice(price) {
  return price - discount;
}

function finalPrice(price, discount) {
  return price - discount;
}



// 8️ Choose Correct Approach



//  Declarative Programming


// 9️ Refactor Loop to FP Style
// let sum = 0;
// for (let i = 0; i < nums.length; i++) {
//   sum += nums[i];
// }

// const sum = nums.reduce((acc, n) => acc + n, 0);


// 10 Fix Shared State Issue
let cart = [];

function addToCart(item) {
  cart.push(item);
}

function addToCart(cart, item) {
  return [...cart, item];
}

// 11 Identify Pure Function


A: Math.random()
B: x => x * 2


// Ans:  B



// 12️ Fix Data Transformation
users.forEach(u => u.active = true);

const updatedUsers = users.map(u => ({ ...u, active: true }));



// 13️ Remove Time Dependency
function getYear() {
  return new Date().getFullYear();
}

function getYear(date) {
  return date.getFullYear();
}



// 14️ Decide Best Practice



//  Side effects and shared mutable state

// 15️ Final Decision Task



//  Immutability
    </script>
</body>
</html>